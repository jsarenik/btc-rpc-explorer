(basic) {
	encode zstd gzip
}

(basicfile) {
	file_server {
		index index.html index.txt index.xml
	}
}

(headers) {
	header {
		Strict-Transport-Security "max-age=31536000; preload"
		X-XSS-Protection "1; mode=block"
		X-Frame-Options "SAMEORIGIN"
		X-Content-Type-Options "nosniff"
	}
}

(be) {
	@gen {
		# generated by gen-gen.sh
		path / /about /address/* /bitcoin-whitepaper /block-analysis /block-analysis/* /block-height/* /block-stats /block/* /blocks /changeSetting /changelog /difficulty-history /disconnect /fun /mempool-summary /mempool-transactions /mining-summary /mining-template /node-details /peers /predicted-blocks /predicted-blocks-old /quote/* /quotes /rpc-browser /rpc-terminal /search /session-data /terminal /tools /tx-stats /tx/* /user-settings /utxo-set /xyzpub/* /admin/app-stats /admin/dashboard /admin/heapdump /admin/os-stats /admin/perf-log /admin/resetUserSettings /api/block/* /api/blockchain/coins /api/blockchain/utxo-set /api/blocks/tip/hash /api/blocks/tip/height /api/changelog /api/docs /api/mempool/count /api/mempool/fees /api/mining/diff-adj-estimate /api/mining/hashrate /api/mining/next-block /api/mining/next-block/includes/* /api/mining/next-block/txids /api/price /api/price/* /api/quotes/* /api/quotes/all /api/quotes/random /api/tx/* /api/util/xyzpub/* /api/version /internal-api/block-headers-by-height/* /internal-api/block-stats-by-height/* /internal-api/block-tx-summaries/* /internal-api/blocks-by-height/* /internal-api/build-mempool-summary /internal-api/build-mining-summary/* /internal-api/build-predicted-blocks /internal-api/difficulty-by-height/* /internal-api/get-mempool-summary /internal-api/get-mining-summary /internal-api/get-predicted-blocks /internal-api/mempool-summary-status /internal-api/mempool-tx-summaries/* /internal-api/mempool-txs/* /internal-api/mining-summary-status /internal-api/predicted-blocks-status /internal-api/raw-tx-with-inputs/* /internal-api/utils/* /snippet/formatCurrencyAmount/* /snippet/next-block /snippet/quote/random /snippet/utxo-set /test/tx-display
	}
	@static {
		path /*.js /*.css /*.xml /*.gz /*.svg /*.png /favicon.ico /bitcoin.pdf /font* /img* /leaflet* /robots.txt /scss* /txt* /style/* /js/*
	}
	root * /home/be/src/btc-rpc-explorer/public
	handle_errors {
		rewrite * /{http.error.status_code}.html
		file_server
	}
	handle @static {
		header Cache-Control "public, max-age=31536000, immutable"
	}
}

http://72nxcu22kctq4h4weifz5bdgg3vcgeminuajuwe7rmic4xqxtih7awid.onion, http://127.0.0.31 {
	import basic
	import basicfile
	import be
	handle @gen {
		reverse_proxy /* http://127.0.0.1:3002
	}
}

ex.signet.bublina.eu.org {
	import basic
	import basicfile
	import headers
	import be
	handle @gen {
		reverse_proxy /* http://127.0.0.1:3003
	}
}

ex.bublina.eu.org, ex-orig.bublina.eu.org, be.anyone.eu.org, be.patocka.eu.org {
	import basic
	import basicfile
	import headers
	import be
	handle @gen {
		reverse_proxy /* http://127.0.0.1:3002
		header /* Onion-Location http://72nxcu22kctq4h4weifz5bdgg3vcgeminuajuwe7rmic4xqxtih7awid.onion{uri}
	}
}
